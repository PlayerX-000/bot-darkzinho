const { MessageType } = require('@adiwajshing/baileys')
const {extendedText} = MessageType

/*-----------------------------------------------------------------------*/

    const help = async (id,conn) => {
        const brincadeiras = [
            {title: 'JOGO: ROLETA RUSSA ', description: "!roleta_russa", rowId:"rowid1"},
            {title: 'JOGO: CARA OU COROA ', description: "!cara_coroa", rowId:"rowid2"},
            {title: 'JOGO: DESCUBRA O PERSONAGEM ', description: "!adivinhe_o_personagem", rowId:"rowid3"}
           ]

        const administracao = [
            {title: 'APENAS ADM`s PODEM FALAR ', description: "!fechar_grupo", rowId:"rowid1"},
            {title: 'TODOS OS MEMBROS PODEM FALAR ', description: "!abrir_grupo", rowId:"rowid2"},
            {title: 'ATIVAR BOAS-VINDAS A MEMBROS NOVOS ', description: "!boas_vindas", rowId:"rowid4"}
           ]
           
           const sections = [
        {
            title: "BRINCADEIRAS ", rows: brincadeiras
        },{
            title: "COMANDOS ADMINISTRATIVOS ", rows: administracao
        }
        
        ]
           
           const button = {
            buttonText: 'LISTAS DE COMANDOS',
            description: "Aqui vocÃª encontrara categorias de comandos com seus respectivos comandos",
            sections: sections,
            listType: 1
           }
           
           const sendMsg = await conn.sendMessage(id, button, MessageType.listMessage)
    }

/*-----------------------------------------------------------------------*/

    const criador = async (id,conn) => {
        const buttons = [
            {buttonId: 'id1', buttonText: {displayText: 'OK'}, type: 1}
          ]
          
          const buttonMessage = {
              contentText: "Darkzinho_itachi esta me criando",
              footerText: 'ctt: +55 (12)99113-0663',
              buttons: buttons,
              headerType: 1
          }
          
          const sendMsg = await conn.sendMessage(id, buttonMessage, MessageType.buttonsMessage)
    }


    const ban = async (id,conn) => {
        const sentMsg  = await conn.sendMessage (id, 'Em desenvolvimento...', MessageType.text)
    }

    
    const marcar_grupo = async (id, conn, chatUpdate) => {

        const isGroup = id.endsWith('@g.us');
        const groupMetadata = isGroup ? await conn.groupMetadata(id) : ''
        const users1 = isGroup ? groupMetadata.participants : ''

        users = [];
        numeros = 'ðŸ‘¿MÎ”RCÎ”Î DÎ© USUÎ”RIÎ©SðŸ˜ˆ \n \n'
        contato = ''
           for(let i of users1) {
               users.push(i.jid)
           }
       users.forEach((ctt,ind)=>{
          numeros += (`${ind+1}Â° - `+'@'+ctt.replace("@s.whatsapp.net","")+"\n \n"); 
          contato += (ctt.replace("@s.whatsapp.net","")+"\n"); 
       })

      conn.sendMessage(id, numeros, extendedText,  { contextInfo: { "mentionedJid": users } })
  

}
    const adm_grupo = async (id, conn) => {

        const isGroup = id.endsWith('@g.us');
        const groupMetadata = isGroup ? await conn.groupMetadata(id) : ''
        const users = isGroup ? groupMetadata.participants : ''

     adms = [];
     lista = 'ðŸ‘¿Î©S Î”DMS Î Î© GRUPÎ© SÎ”Î©ðŸ˜ˆ \n \n'
        for(let i of users) {
            i.isAdmin ? adms.push(i.jid) : ''
        }
    adms.forEach((ctt,ind)=>{
       lista += (`${ind+1}Â° - `+ctt.replace("@s.whatsapp.net","")+"\n \n"); 
    })

conn.sendMessage(id, lista, extendedText,  { contextInfo: { "mentionedJid": adms } })
    }


/*-----------------------------------------------------------------------*/

    module.exports = { criador , help , ban , adm_grupo , marcar_grupo}